## Đề bài: Phát triển Giao diện Quản lý Cấu hình Điều hướng (shell-config-admin-frontend) - Phần 4

**Mục tiêu:** Xây dựng một **Micro-Frontend** sử dụng React và TypeScript, có tên là `shell-config-admin-frontend`. Micro-Frontend này sẽ được **`shell-app-admin`** (Shell chính dành cho quản trị viên) gọi vào và nhúng vào khung của nó. `shell-config-admin-frontend` sẽ cho phép người dùng quản lý **các mục điều hướng (navigation items)** của hệ thống Shell Framework, bao gồm cả các mục chính (Global Navigation), các mục con (sub-items) và các menu thả xuống (dropdowns). Giao diện phải hỗ trợ đa ngôn ngữ (Tiếng Việt và Tiếng Anh) theo mô hình tập trung và tương tác với dịch vụ backend `shell-config-service` thông qua Kong API Gateway.

**Phạm vi và Chức năng:**

1.  **Giao diện người dùng (UI/UX) và Kiến trúc Micro-Frontend:**
    *   Sử dụng **React với TypeScript** để phát triển ứng dụng.
    *   Áp dụng thư viện **Ant Design** để xây dựng các thành phần UI, đảm bảo giao diện hiện đại, chuyên nghiệp và dễ sử dụng.
    *   `shell-config-admin-frontend` phải được thiết kế để chạy ở **"embedded mode"** như đã nêu trong tài liệu kiến trúc [1]. Điều này có nghĩa là nó **chỉ được phép render phần nội dung nghiệp vụ cốt lõi** của mình và **phải ẩn** đi các thành phần như Header, Footer, và thanh điều hướng toàn cục của chính nó khi được `shell-app-admin` nhúng vào.
    *   `shell-app-admin` (Shell chính) sẽ cung cấp bố cục chung bao gồm Header (chứa bộ chuyển đổi ngôn ngữ và Global Navigation) và Sidebar (chứa Local Navigation).
    *   Đảm bảo giao diện tuân thủ nguyên tắc **Responsive Design** như đã nêu trong tài liệu kiến trúc [1] (không sử dụng kích thước cố định, layout co giãn để lấp đầy 100% không gian).

2.  **Hỗ trợ Đa ngôn ngữ (Internationalization - i18n) - Chiến lược Tập trung:**
    *   Tích hợp thư viện **`react-i18next`** để quản lý và chuyển đổi ngôn ngữ cho toàn bộ giao diện.
    *   **Quan trọng:** Theo "Giáo Trình Kiến Trúc Hệ Thống Micro-Frontend (sheel)" [1], chiến lược đa ngôn ngữ là tập trung. Điều này có nghĩa là `shell-config-admin-frontend` sẽ tương tác với một **`i18n-service`** (hoặc một endpoint tương tự trên `shell-config-service` nếu `i18n-service` chưa được triển khai riêng) để lấy các file ngôn ngữ (dưới dạng JSON) cho chính nó và các ứng dụng con.
    *   Triển khai một **Bộ chuyển đổi ngôn ngữ (Language Switcher)** trong Header. Khi người dùng chuyển đổi ngôn ngữ, Shell sẽ:
        *   Lưu lựa chọn ngôn ngữ vào `localStorage` hoặc `cookie`.
        *   Thông báo cho các ứng dụng con (nếu có) thông qua một sự kiện toàn cục (custom event) về sự thay đổi ngôn ngữ.
        *   Tải lại các file ngôn ngữ cần thiết từ `i18n-service` và cập nhật giao diện ngay lập tức.
    *   Cung cấp các file dịch thuật mẫu (`vi.json` và `en.json`) cho các văn bản hiển thị trên giao diện của `shell-config-admin-frontend`.

3.  **Quản lý Navigation Items (CRUD Operations) với Cấu trúc Phân cấp - Chiến lược Điều hướng Phân cấp:**
    Giao diện này sẽ cho phép người dùng thực hiện các thao tác quản lý trên các mục điều hướng, bao gồm cả Global Navigation và Local Navigation. Mỗi mục điều hướng sẽ có các thuộc tính sau:
    *   **ID:** Mã định danh duy nhất.
    *   **Name (Tên):** Tên hiển thị của mục điều hướng (hỗ trợ đa ngôn ngữ).
    *   **Path (Đường dẫn):** URL mà mục này sẽ điều hướng đến.
    *   **Icon (Biểu tượng):** Biểu tượng đi kèm với mục (ví dụ: từ Ant Design Icons).
    *   **Order (Thứ tự):** Vị trí hiển thị của mục trong danh sách hoặc menu.
    *   **IsVisible (Hiển thị):** Trạng thái hiển thị của mục (có thể bật/tắt).
    *   **ParentId (Mục cha):** ID của mục cha nếu đây là một mục con hoặc nằm trong dropdown. Điều này cho phép xây dựng cấu trúc phân cấp (menu 2 cấp hoặc nhiều hơn).
    *   **Type (Loại):** Xác định đây là mục Global Navigation hay Local Navigation.
    *   **Permissions (Quyền hạn):** (Tùy chọn) Quyền hạn cần thiết để xem và truy cập mục này.

    **Các chức năng CRUD cụ thể:**
    *   **Hiển thị danh sách:** Hiển thị tất cả các navigation items hiện có trong một bảng hoặc danh sách. Cần có khả năng hiển thị cấu trúc phân cấp (ví dụ: sử dụng cây hoặc danh sách lồng nhau của Ant Design) để thể hiện các mục cha-con.
    *   **Thêm mới:** Cung cấp một form để thêm navigation item mới với tất cả các trường đã nêu, bao gồm trường chọn mục cha (ParentId) và loại (Type).
    *   **Chỉnh sửa:** Cho phép người dùng chỉnh sửa thông tin của một navigation item hiện có, bao gồm cả việc thay đổi mục cha của nó.
    *   **Xóa:** Cung cấp chức năng xóa navigation item (có xác nhận). Khi xóa một mục cha, cần có cơ chế xử lý các mục con của nó (ví dụ: xóa theo, hoặc chuyển các mục con lên cấp cao hơn).
    *   **Validation:** Thực hiện kiểm tra dữ liệu đầu vào (ví dụ: `name` không được trống, `path` phải là URL hợp lệ, không thể chọn chính nó làm mục cha).

4.  **Tích hợp Backend (shell-config-service) và Kong API Gateway:**
    *   Sử dụng thư viện **`axios`** để thực hiện các HTTP requests đến `shell-config-service`.
    *   Đảm bảo các API endpoint của `shell-config-service` hỗ trợ cấu trúc phân cấp của navigation items (ví dụ: có trường `parentId` hoặc tương tự) và các thuộc tính khác.
    *   Tất cả các request phải đi qua **Kong API Gateway**. Đảm bảo cấu hình routing trên Kong đã được thiết lập đúng để chuyển tiếp request từ Frontend đến `shell-config-service`.
    *   Xử lý các phản hồi từ API, bao gồm hiển thị thông báo thành công/thất bại cho người dùng.

**Yêu cầu kỹ thuật:**

*   **Ngôn ngữ:** JavaScript (JSX) với TypeScript.
*   **Framework/Thư viện:** React, Ant Design, `react-i18next`, `axios`.
*   **Cấu trúc dự án:** Tuân thủ cấu trúc dự án React tiêu chuẩn, tổ chức code rõ ràng (components, services, utils, v.v.).
*   **Quản lý trạng thái:** Sử dụng React Hooks (useState, useEffect, useContext) để quản lý trạng thái component.
*   **Styling:** Sử dụng Tailwind CSS (đã được cài đặt) hoặc các phương pháp styling của Ant Design.

**Cấu trúc thư mục đề xuất cho `shell-config-admin-frontend`:**

```
frontend/
└── shell-config-admin-frontend/
    ├── public/
    │   └── index.html
    ├── src/
    │   ├── assets/             # Chứa các tài nguyên tĩnh như hình ảnh, font
    │   ├── components/         # Các component UI dùng chung hoặc nhỏ
    │   │   ├── LanguageSwitcher.jsx
    │   │   ├── Layout.jsx
    │   │   └── ui/             # Các component từ shadcn/ui (nếu sử dụng)
    │   ├── pages/              # Các trang chính của ứng dụng
    │   │   └── NavigationManagement/ # Thư mục cho trang quản lý điều hướng
    │   │       ├── NavigationList.jsx
    │   │       ├── NavigationForm.jsx
    │   │       └── index.jsx   # Trang tổng hợp quản lý điều hướng
    │   ├── services/           # Các service gọi API backend
    │   │   └── navigationService.js
    │   ├── utils/              # Các hàm tiện ích, helpers
    │   ├── i18n.js             # Cấu hình i18n
    │   ├── App.jsx             # Component chính của ứng dụng
    │   ├── App.css             # Stylesheets chính
    │   ├── index.css           # Global styles
    │   └── main.jsx            # Entry point của ứng dụng
    ├── locales/                # Thư mục chứa các file dịch thuật mẫu (sẽ được tải từ i18n-service)
    │   ├── vi/
    │   │   └── translation.json
    │   └── en/
    │       └── translation.json
    ├── package.json
    ├── pnpm-lock.yaml
    ├── vite.config.js
    └── ... (các file cấu hình khác)
```

**Các bước thực hiện chính:**

1.  **Cập nhật `App.jsx`:** Thay thế nội dung mặc định bằng `AppLayout` và thiết lập routing cơ bản cho các trang quản lý (sử dụng `react-router-dom`).
2.  **Tạo các trang/component:**
    *   `NavigationList.jsx`: Hiển thị danh sách navigation items, hỗ trợ hiển thị cấu trúc cây hoặc lồng nhau từ Ant Design.
    *   `NavigationForm.jsx`: Form để thêm/chỉnh sửa navigation items, bao gồm trường chọn mục cha (ParentId) và loại (Type).
    *   Tích hợp các component này vào `AppLayout`.
3.  **Tạo Service API:** Viết các hàm trong `services/navigationService.js` để gọi API đến `shell-config-service` (ví dụ: `getNavigationItems`, `createNavigationItem`, `updateNavigationItem`, `deleteNavigationItem`), đảm bảo xử lý dữ liệu có cấu trúc phân cấp và các thuộc tính khác.
4.  **Kiểm thử:** Đảm bảo các chức năng CRUD hoạt động đúng, đa ngôn ngữ hoạt động trơn tru và tích hợp với backend thành công, đặc biệt là với các mục có cấu trúc phân cấp và việc chuyển đổi ngôn ngữ.

**Tài liệu tham khảo:**

[1] Giáo Trình Kiến Trúc Hệ Thống Micro-Frontend (sheel).md

Đây là đề bài chi tiết cho Phần 4, bao gồm cả yêu cầu về đa ngôn ngữ, cấu trúc phân cấp của navigation items và cấu trúc thư mục đề xuất. Bạn có muốn tôi bắt đầu thực hiện phần này không?

